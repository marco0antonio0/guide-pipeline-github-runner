# Arquitetura do GitHub Actions

## ğŸ“Š VisÃ£o Geral do Fluxo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     GitHub Repository                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              .github/workflows/*.yml                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Evento (push, PR, etc.)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   GitHub Actions Service                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. LÃª o workflow YAML                              â”‚   â”‚
â”‚  â”‚  2. Valida sintaxe                                  â”‚   â”‚
â”‚  â”‚  3. Agenda jobs                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ Aloca Runner
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  GitHub-hosted Runner                        â”‚
â”‚                    (Ubuntu Linux)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Ambiente Limpo:                                    â”‚   â”‚
â”‚  â”‚  - Ubuntu 20.04 ou 22.04                            â”‚   â”‚
â”‚  â”‚  - 2 CPU cores                                      â”‚   â”‚
â”‚  â”‚  - 7 GB RAM                                         â”‚   â”‚
â”‚  â”‚  - 14 GB SSD                                        â”‚   â”‚
â”‚  â”‚  - Ferramentas prÃ©-instaladas                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  Executa Steps:                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Step 1: Checkout do cÃ³digo                         â”‚   â”‚
â”‚  â”‚           â†“                                         â”‚   â”‚
â”‚  â”‚  Step 2: Instalar dependÃªncias                      â”‚   â”‚
â”‚  â”‚           â†“                                         â”‚   â”‚
â”‚  â”‚  Step 3: Executar testes                            â”‚   â”‚
â”‚  â”‚           â†“                                         â”‚   â”‚
â”‚  â”‚  Step 4: Build                                      â”‚   â”‚
â”‚  â”‚           â†“                                         â”‚   â”‚
â”‚  â”‚  Step 5: Deploy                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â”‚ RelatÃ³rio de Status
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Resultados no GitHub                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  âœ… Job 1: Success (2m 30s)                         â”‚   â”‚
â”‚  â”‚  âœ… Job 2: Success (1m 45s)                         â”‚   â”‚
â”‚  â”‚  âŒ Job 3: Failed (0m 15s)                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Ciclo de Vida de um Workflow

### 1. Acionamento (Trigger)
```
Evento â†’ GitHub detecta â†’ Workflow Ã© acionado
```

**Eventos comuns:**
- `push` - CÃ³digo enviado
- `pull_request` - PR aberto/atualizado
- `schedule` - Cron job
- `workflow_dispatch` - Manual

### 2. PreparaÃ§Ã£o do Runner

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Runner Pool        â”‚
â”‚  â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”‚
â”‚  â”‚ R1â”‚ â”‚ R2â”‚ â”‚ R3â”‚ â”‚
â”‚  â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼ Seleciona um runner disponÃ­vel
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Runner Alocado     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Ubuntu      â”‚    â”‚
â”‚  â”‚ + Tools     â”‚    â”‚
â”‚  â”‚ + Docker    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. ExecuÃ§Ã£o de Jobs

#### Jobs em Paralelo (PadrÃ£o)
```
Workflow
â”œâ”€â”€ Job A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ… (2 min)
â”œâ”€â”€ Job B â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ… (3 min)
â””â”€â”€ Job C â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ… (2 min)

Total: ~3 min (tempo do job mais longo)
```

#### Jobs Sequenciais (com `needs`)
```
Workflow
â”œâ”€â”€ Job A â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º âœ… (2 min)
     â””â”€â”€â–º Job B â”€â”€â”€â”€â”€â–º âœ… (3 min)
           â””â”€â”€â–º Job C â–º âœ… (2 min)

Total: 7 min (soma de todos)
```

#### Jobs com DependÃªncias Complexas
```
       Job A (Build)
         /    \
        /      \
   Job B      Job C
   (Test)     (Lint)
        \      /
         \    /
       Job D (Deploy)
         
Se A falha â†’ B, C, D nÃ£o executam
Se B ou C falha â†’ D nÃ£o executa
```

### 4. Steps dentro de um Job

```
Job: build
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Checkout                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ uses: actions/checkout@v4           â”‚ â”‚
â”‚ â”‚ Status: âœ… (5s)                     â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Step 2: Setup Node                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ uses: actions/setup-node@v4         â”‚ â”‚
â”‚ â”‚ Status: âœ… (10s)                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Step 3: Install Dependencies            â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ run: npm ci                         â”‚ â”‚
â”‚ â”‚ Status: âœ… (45s)                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚
â”‚ Step 4: Run Tests                       â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ run: npm test                       â”‚ â”‚
â”‚ â”‚ Status: âŒ (15s)                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Status: âŒ Failed
```

## ğŸ—ï¸ Anatomia de um Runner Linux

### Sistema de Arquivos
```
/
â”œâ”€â”€ home/
â”‚   â””â”€â”€ runner/
â”‚       â”œâ”€â”€ work/
â”‚       â”‚   â””â”€â”€ <repo-name>/
â”‚       â”‚       â””â”€â”€ <repo-name>/     â† Seu cÃ³digo aqui
â”‚       â”œâ”€â”€ .npm/                     â† Cache npm
â”‚       â”œâ”€â”€ .cache/                   â† Cache geral
â”‚       â””â”€â”€ .local/                   â† InstalaÃ§Ãµes locais
â”œâ”€â”€ usr/
â”‚   â”œâ”€â”€ bin/                          â† Ferramentas do sistema
â”‚   â””â”€â”€ local/                        â† Software adicional
â””â”€â”€ opt/                              â† Ferramentas prÃ©-instaladas
    â”œâ”€â”€ hostedtoolcache/              â† VersÃµes de linguagens
    â””â”€â”€ pipx/                         â† Ferramentas Python
```

### Ferramentas PrÃ©-instaladas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Ubuntu Runner                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Linguagens:                                            â”‚
â”‚  â€¢ Python (3.8, 3.9, 3.10, 3.11)                       â”‚
â”‚  â€¢ Node.js (16, 18, 20)                                â”‚
â”‚  â€¢ Java (8, 11, 17, 21)                                â”‚
â”‚  â€¢ Go (1.20, 1.21)                                     â”‚
â”‚  â€¢ PHP, Ruby, .NET                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Ferramentas de Dev:                                    â”‚
â”‚  â€¢ Git, Docker, Docker Compose                         â”‚
â”‚  â€¢ kubectl, helm                                       â”‚
â”‚  â€¢ terraform, ansible                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Build Tools:                                           â”‚
â”‚  â€¢ make, cmake, gcc, g++                               â”‚
â”‚  â€¢ maven, gradle                                       â”‚
â”‚  â€¢ npm, yarn, pip                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Databases (para testes):                               â”‚
â”‚  â€¢ PostgreSQL, MySQL                                   â”‚
â”‚  â€¢ MongoDB, Redis                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” SeguranÃ§a e PermissÃµes

### Estrutura de PermissÃµes
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Repository (NÃ­vel mais alto)          â”‚
â”‚  â”œâ”€â”€ Secrets                           â”‚
â”‚  â”œâ”€â”€ Environments                      â”‚
â”‚  â”‚   â”œâ”€â”€ production                    â”‚
â”‚  â”‚   â”‚   â””â”€â”€ Secrets especÃ­ficos      â”‚
â”‚  â”‚   â””â”€â”€ staging                       â”‚
â”‚  â”‚       â””â”€â”€ Secrets especÃ­ficos      â”‚
â”‚  â””â”€â”€ Workflow Permissions              â”‚
â”‚      â”œâ”€â”€ Read                          â”‚
â”‚      â”œâ”€â”€ Write                         â”‚
â”‚      â””â”€â”€ Admin                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Uso de Secrets
```yaml
# No workflow
env:
  API_KEY: ${{ secrets.API_KEY }}
  DB_PASSWORD: ${{ secrets.DB_PASSWORD }}

# Secrets nunca aparecem em logs
# Sempre sÃ£o mascarados: ***
```

## ğŸ“Š Matrix Strategy

### ExecuÃ§Ã£o em MÃºltiplas ConfiguraÃ§Ãµes

```
Matrix: 
  os: [ubuntu-latest, windows-latest, macos-latest]
  node: [16, 18, 20]

Gera 9 jobs:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ubuntu + node 16  âœ…                  â”‚
â”‚  ubuntu + node 18  âœ…                  â”‚
â”‚  ubuntu + node 20  âœ…                  â”‚
â”‚  windows + node 16 âœ…                  â”‚
â”‚  windows + node 18 âŒ                  â”‚
â”‚  windows + node 20 âœ…                  â”‚
â”‚  macos + node 16   âœ…                  â”‚
â”‚  macos + node 18   âœ…                  â”‚
â”‚  macos + node 20   âœ…                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: 8 passaram, 1 falhou
```

## ğŸ¯ PadrÃµes de CI/CD

### Pipeline BÃ¡sico
```
â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Lint â”‚â”€â”€â–ºâ”‚ Test â”‚â”€â”€â–ºâ”‚ Deploy â”‚
â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pipeline Completo
```
         â”Œâ”€â”€â”€â”€â”€â”€â”
         â”‚ Lint â”‚
         â””â”€â”€â”¬â”€â”€â”€â”˜
            â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
    â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Test  â”‚     â”‚ Security â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â”‚               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
            â–¼
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Build   â”‚
      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
           â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
    â–¼             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Staging â”‚   â”‚ Production â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pipeline com Ambientes
```
main/master branch
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Build     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Aguarda
â”‚  Staging    â”‚â”€â”€â”€â”€â–º AprovaÃ§Ã£o
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜      Manual
       â”‚                â”‚
       â–¼                â”‚
   [Testes]â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Requer
â”‚ Production  â”‚â”€â”€â”€â”€â–º Review
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¾ Cache e Artifacts

### Cache (ReutilizaÃ§Ã£o entre runs)
```
Run 1:
â”œâ”€â”€ Build dependencies (5 min)
â””â”€â”€ Save to cache

Run 2:
â”œâ”€â”€ Restore from cache (10s) âœ…
â””â”€â”€ Build dependencies skipped!
```

### Artifacts (Compartilhamento entre jobs)
```
Job A: Build
â”œâ”€â”€ Compila cÃ³digo
â”œâ”€â”€ Gera dist/
â””â”€â”€ Upload artifact "build"

Job B: Test
â”œâ”€â”€ Download artifact "build"
â”œâ”€â”€ Executa testes
â””â”€â”€ Upload artifact "coverage"

Job C: Deploy
â”œâ”€â”€ Download artifact "build"
â””â”€â”€ Deploy para servidor
```

## ğŸ” Debugging

### VisualizaÃ§Ã£o de Logs
```
Workflow Run #123
â”œâ”€â”€ ğŸ“Š Summary
â”œâ”€â”€ ğŸ“ Jobs
â”‚   â”œâ”€â”€ ğŸŸ¢ build (2m 30s)
â”‚   â”‚   â”œâ”€â”€ Set up job (5s)
â”‚   â”‚   â”œâ”€â”€ Checkout (8s)
â”‚   â”‚   â”œâ”€â”€ Setup Node (12s)
â”‚   â”‚   â”œâ”€â”€ Install (1m 45s)
â”‚   â”‚   â”œâ”€â”€ Build (15s)
â”‚   â”‚   â””â”€â”€ Post actions (5s)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ”´ test (45s)
â”‚       â”œâ”€â”€ Set up job (5s)
â”‚       â”œâ”€â”€ Checkout (8s)
â”‚       â””â”€â”€ Run tests (32s) â† FALHOU AQUI
â”‚           â””â”€â”€ Error: Test suite failed
â””â”€â”€ ğŸ“¦ Artifacts
    â””â”€â”€ test-results
```

## ğŸ“ˆ Boas PrÃ¡ticas de Arquitetura

### 1. SeparaÃ§Ã£o de Concerns
```yaml
workflows/
â”œâ”€â”€ ci.yml          # Build e testes
â”œâ”€â”€ cd.yml          # Deploy
â”œâ”€â”€ security.yml    # VerificaÃ§Ãµes de seguranÃ§a
â””â”€â”€ schedule.yml    # Tarefas agendadas
```

### 2. Reuso com Composite Actions
```yaml
# .github/actions/setup/action.yml
- uses: actions/checkout@v4
- uses: actions/setup-node@v4
- run: npm ci

# Uso:
- uses: ./.github/actions/setup
```

### 3. DRY com Reusable Workflows
```yaml
# .github/workflows/reusable-build.yml
on:
  workflow_call:

# Chamada:
jobs:
  build:
    uses: ./.github/workflows/reusable-build.yml
```

---

Este documento fornece uma visÃ£o arquitetural completa do GitHub Actions e como os workflows funcionam no runner Linux.
