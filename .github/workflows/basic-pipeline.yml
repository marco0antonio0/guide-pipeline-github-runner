# Pipeline BÃ¡sica - DemonstraÃ§Ã£o de Conceitos Fundamentais
# Este workflow mostra os componentes bÃ¡sicos de uma pipeline do GitHub Actions

name: Pipeline BÃ¡sica

# Eventos que acionam o workflow
on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:  # Permite execuÃ§Ã£o manual

# Jobs que serÃ£o executados
jobs:
  # Primeiro Job: SaudaÃ§Ã£o
  hello-world:
    runs-on: ubuntu-latest  # Runner Linux (Ubuntu)
    steps:
      - name: Exibir mensagem de boas-vindas
        run: echo "ğŸš€ Bem-vindo ao GitHub Actions!"
      
      - name: Exibir informaÃ§Ãµes do sistema
        run: |
          echo "ğŸ–¥ï¸ Sistema Operacional: ${{ runner.os }}"
          echo "ğŸ“ DiretÃ³rio de trabalho: ${{ github.workspace }}"
          echo "ğŸ”§ RepositÃ³rio: ${{ github.repository }}"
          echo "ğŸŒ¿ Branch: ${{ github.ref }}"
      
      - name: Executar comandos bash
        run: |
          whoami
          pwd
          uname -a
          df -h

  # Segundo Job: Checkout e AnÃ¡lise
  checkout-example:
    runs-on: ubuntu-latest
    steps:
      - name: Fazer checkout do cÃ³digo
        uses: actions/checkout@v4
      
      - name: Listar arquivos do repositÃ³rio
        run: |
          echo "ğŸ“‚ ConteÃºdo do repositÃ³rio:"
          ls -la
          echo ""
          echo "ğŸŒ³ Estrutura de diretÃ³rios:"
          tree -L 2 || find . -maxdepth 2 -type d
      
      - name: Exibir conteÃºdo do README
        run: |
          if [ -f README.md ]; then
            echo "ğŸ“– Primeiras linhas do README.md:"
            head -n 10 README.md
          fi

  # Terceiro Job: VariÃ¡veis de Ambiente
  environment-variables:
    runs-on: ubuntu-latest
    env:
      GLOBAL_VAR: "VariÃ¡vel Global"
    steps:
      - name: Usar variÃ¡veis de ambiente
        env:
          STEP_VAR: "VariÃ¡vel do Step"
        run: |
          echo "ğŸ” VariÃ¡veis de Ambiente:"
          echo "Global: $GLOBAL_VAR"
          echo "Step: $STEP_VAR"
          echo "Sistema: $PATH"
      
      - name: Criar variÃ¡vel personalizada
        run: |
          echo "CUSTOM_VAR=Valor Personalizado" >> $GITHUB_ENV
      
      - name: Usar variÃ¡vel personalizada
        run: 'echo "VariÃ¡vel criada: $CUSTOM_VAR"'

  # Quarto Job: DependÃªncias entre Jobs
  depends-on-others:
    runs-on: ubuntu-latest
    needs: [hello-world, checkout-example]  # Aguarda conclusÃ£o dos jobs anteriores
    steps:
      - name: Job executado apÃ³s dependÃªncias
        run: |
          echo "âœ… Este job sÃ³ executa apÃ³s 'hello-world' e 'checkout-example'"
          echo "ğŸ“Š Status: Todos os jobs anteriores foram concluÃ­dos com sucesso!"
